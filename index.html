<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PDF Structure Analyzer</title>
    <link rel="stylesheet" href="./css/app.css" />
  </head>
  <body>
    <div class="app-shell">
      <header class="titlebar">
        <div class="brand">
          <div class="brand-mark">PDF</div>
          <div>
            
            <h1>PDF Structure Analyzer</h1>
          </div>
        </div>
        <div class="title-actions">
          <span class="chip">Local document lab</span>
          <span class="chip">Live preview</span>
        </div>
      </header>

      <div class="ribbon">
        <div class="tab-row">
          <button class="active" type="button">Home</button>
          <button type="button">Insert</button>
          <button type="button">View</button>
          <button type="button">Plugins</button>
        </div>
        <div class="command-row">
          <div class="command-group">
            <p class="group-label">Insert</p>
            <div class="command-actions">
              <label class="command-btn primary" for="pdfInput">
                <input id="pdfInput" class="hidden-input" type="file" accept="application/pdf" />
                Upload PDF
              </label>
              <span class="hint-inline">The file never leaves your browser.</span>
            </div>
          </div>
          <div class="command-group">
            <p class="group-label">Workflow</p>
            <div class="command-actions">
              <button id="analyzeBtn" class="primary" disabled>Analyze</button>
              <button id="previewBtn" class="ghost" disabled>Preview</button>
              <button id="extractBtn" class="ghost" disabled>Extract</button>
              <button id="extractImagesBtn" class="ghost" disabled>Extract Images</button>
            </div>
          </div>
          <div class="command-group">
            <p class="group-label">Exports</p>
            <div class="command-actions">
              <button id="markdownBtn" disabled>Markdown</button>
              <button id="jsonBtn" disabled>JSON</button>
              <button id="csvBtn" disabled>CSV</button>
            </div>
          </div>
        </div>
      </div>

      <div class="workspace">
        <aside class="tool-rail" aria-label="Preview tools">
          <button id="selectTool" class="active" aria-label="Select tool">â–¡</button>
          <button aria-label="Hand tool">âœ‹</button>
          <button aria-label="Text box">T</button>
          <button aria-label="Shapes">â¬š</button>
          <button aria-label="Image">ðŸ–¼</button>
          <button aria-label="More">â‹¯</button>
        </aside>

        <div class="workspace-body">
          <div class="stage">
            <div class="stage-header">
              <div>
                <p class="eyebrow">Preview</p>
                <h2>Document canvas</h2>
              </div>
              <div class="stage-metadata">
                <span class="pill page-indicator" id="pageIndicator">Page â€”</span>
              </div>
            </div>
            <div class="preview-shell">
              <section class="panel preview-panel" id="previewPanel">
                <h3>Live Preview</h3>
                <canvas id="pageCanvas" class="preview" aria-label="PDF page preview"></canvas>
                <div id="selectionLayer" class="selection-layer" aria-hidden="true"></div>
              </section>
            </div>
          </div>
        </div>

        <aside class="inspector" aria-label="Command panels">
          <div class="inspector-scroll">
            <div class="intro-card">
              <p class="eyebrow">Structure analyzer</p>
              <h1>Inspect every page</h1>
              <p>Trace headers, footers, columns, and invisible text as if you were editing the PDF in a desktop suite.</p>
              <div id="loading" class="status-chip" aria-live="polite">Status: idle</div>
            </div>

            <section class="panel">
              <h2>Document Overview</h2>
              <div id="summary" class="summary">Load a document to view its metadata.</div>
              <div>
                <h3>Page groups</h3>
                <ul id="pageGroups" class="page-groups"></ul>
              </div>
              <div class="modified-panel">
                <h3>Modified pages</h3>
                <div id="overrideSummary" class="modified-list">
                  <p>No header/footer overrides applied yet.</p>
                </div>
              </div>
            </section>

            <section class="panel settings-panel">
              <h2>Analysis Settings</h2>
              <p class="hint">Tune heuristics before or after running analysis. Settings persist in this browser.</p>
              <div class="settings-grid">
                <label>
                  TOC cue threshold (%)
                  <input type="number" min="5" max="95" step="5" id="tocThreshold" />
                </label>
                <label>
                  Index cue minimum (lines)
                  <input type="number" min="1" max="20" step="1" id="indexMinimum" />
                </label>
                <label>
                  Invisible text width threshold
                  <input type="number" min="0.01" max="1" step="0.01" id="invisibleThreshold" />
                </label>
              </div>
              <div class="settings-actions">
                <button type="button" id="applySettings">Apply settings</button>
                <button type="button" class="secondary" id="resetSettings">Reset defaults</button>
              </div>
            </section>

            <section class="panel">
              <h2>Page Details</h2>
              <div class="page-controls">
                <label for="pageSelect">Jump to page:</label>
                <input id="pageSelect" type="number" min="1" disabled />
                <button id="prevPage" disabled>Previous</button>
                <button id="nextPage" disabled>Next</button>
              </div>
              <div id="pageDetails" class="details">Select a page to inspect its structure.</div>
            </section>

            <section class="panel search-panel">
              <h2>Search &amp; Entities</h2>
              <input type="search" id="searchInput" placeholder="Search text across the document" disabled />
              <div id="searchResults" class="search-results">
                <p>Load a document to enable search.</p>
              </div>
              <div>
                <h3>Detected entities</h3>
                <div id="entityList" class="entity-chips"></div>
              </div>
            </section>

            <section class="panel">
              <h2>Extracted Images</h2>
              <p class="hint">Export all embedded images into a simple gallery.</p>
              <div id="imageGrid" class="image-grid">
                <p class="hint">Run "Extract Images" to see any embedded artwork.</p>
              </div>
            </section>
          </div>
        </aside>
      </div>

      <footer>
        <p>
          Built with <a href="https://mozilla.github.io/pdf.js/" target="_blank" rel="noreferrer">pdf.js</a> to
          accelerate legal-document ingestion for knowledge bases.
        </p>
      </footer>
    </div>

    <script type="module" src="./src/app.js"></script>
  </body>
</html>
